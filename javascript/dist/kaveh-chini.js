!function(){"use strict";function e(e){return e.ctrlKey||e.metaKey}function t(e){var t=e.split("/"),n=t.pop();return(!n||e.indexOf("?")>-1)&&(n=t.pop()),n}function n(){var e=document.location.search;return e?e.split("portfolio_item=")[1]:null}!function(){function e(){n.classList.toggle("active")}function t(){var e=document.querySelector(".main-nav-table-cell");e.classList.toggle("display-block")}var n=document.querySelector(".mobile-nav-toggle .nav-toggle");n.addEventListener("click",function(n){n.preventDefault(),e(),t()});var o=document.querySelectorAll(".main-nav a");Array.prototype.filter.call(o,function(n){n.addEventListener("click",function(){e(),t()})})}(),function(){function n(e){var t;t=d.indexOf(e)<0?"*":"."+e,l.arrange({filter:t}),o(e)}function o(e){var t=document.querySelectorAll(".main-nav li"),n="current-menu-item";Array.prototype.filter.call(t,function(t){var o=t.classList;o.remove(n),o.contains(e+"-nav")&&o.add(n)})}function a(e){history.pushState(null,null,e)}var i=document.querySelector(".portfolio-items");if(i){var l=new Isotope(i,{itemSelector:"li"});imagesLoaded(i,function(){document.querySelector(".portfolio").classList.add("loaded");var e=t(document.location.href);n(e)}),window.addEventListener("popstate",function(){var e=t(document.location.href);n(e)});var r=document.querySelector(".logo a");r.addEventListener("click",function(e){e.preventDefault(),n("home"),a(this)});var c=document.querySelectorAll(".main-nav a"),d=[];Array.prototype.filter.call(c,function(o){var i=o.parentElement.classList;if(i.contains("filter")){var l=o.getAttribute("href"),r=t(l);d.push(r),o.addEventListener("click",function(t){e(t)||(t.preventDefault(),n(r),a(this))})}})}}(),function(){function o(e){var t="?portfolio_item="+e;history.pushState(null,null,t)}function a(e){i(e,function(e){var t=JSON.parse(e.responseText);d(t),setTimeout(function(){var e=document.querySelector(".modal-container");e&&e.classList.add("loaded")},10)})}function i(e,t){var n=new XMLHttpRequest;n.onload=function(){t(n)},n.open("get","/wp-admin/admin-ajax.php?action=portfolio&slug="+e,!0),n.send()}function l(e){var t=e.target;(t.classList.contains("modal")||t.classList.contains("close-modal-button"))&&(c(),history.pushState(null,null,window.location.href.split("?")[0]))}function r(){c()}function c(){var e=document.querySelector(".modal");if(e){var t=document.querySelector(".modal-container");t.classList.remove("loaded"),setTimeout(function(){e.removeEventListener("click",l),e.remove()},400)}}function d(e){var t=document.createElement("div");t.className="modal "+e.portfolio.category_slug,t.setAttribute("role","dialog"),t.setAttribute("tabindex","1"),t.addEventListener("click",l);var n=u();return n.appendChild(s(e)),n.appendChild(m(e)),t.appendChild(n),document.body.appendChild(t)}function u(){var e=document.createElement("div");return e.className="modal-container",e}function s(e){var t=document.createElement("div");t.className="header display-table";var n=document.createElement("div");n.className="title display-table-cell";var o=document.createElement("a");o.className="close-modal-button",o.appendChild(document.createTextNode("Ã—"));var a=document.createElement("div");a.appendChild(o),a.className="close-modal display-table-cell";var i=document.createTextNode(e.portfolio.title);return n.appendChild(i),t.appendChild(n),t.appendChild(a),t}function m(e){var t=document.createElement("div");return t.className="body display-table",t.appendChild(p(e)),t.appendChild(v(e)),t}function p(e){var t=document.createElement("div");t.className="media display-table-cell align-top";var n=e.portfolio.images.map(function(e){return'<img src="'+e+'" />'}),o=e.portfolio.videos,a="";return o.length>0&&(a+=o.join("")),n.length>0&&(a+=n.join("")),t.innerHTML=a,t}function v(e){var t=document.createElement("div");return t.className="narrative display-table-cell align-top",t.innerHTML=e.portfolio.narrative,t}var f=document.querySelectorAll(".portfolio-items li");f.length<1||(window.addEventListener("popstate",function(){var e=n();e?a(e):r()}),function(){var e=n();e&&a(e)}(),Array.prototype.filter.call(f,function(n){n.addEventListener("click",function(i){if(!e(i)){i.preventDefault();var l=n.querySelector("a"),r=t(l.getAttribute("href"));a(r),o(r)}})}))}()}();